# Настройки xDrip+

Если это еще не сделано, загрузите [xDrip+](https://jamorham.github.io/#xdrip-plus).

Отключите оптимизацию заряда батареи и разрешите фоновую активность приложению xDrip+.

Вы можете безопасно загрузить [ новую (стабильную) версию APK ](https://xdrip-plus-updates.appspot.com/stable/xdrip-plus-latest.apk), если только вам не нужны новейшие функции или вы пользуетесь сенсорами, которые активно интегрируются (как G7). В этом случае следует загружать т. н. [Ночную сборку](https://github.com/NightscoutFoundation/xDrip/releases).

## Основные настройки для всех систем мониторинга

### Отключите выгрузку в Nightscout

Начиная с AAPS 3.2, не позволяйте никаким другим приложениям загружать данные (уровень глюкозы в крови и терапию) в Nightscout.

→ Сэндвич-меню (1) → Настройки (2) → Загрузка в облако(3) -> Синхронизация с Nightscout (REST-API)(4) → Передать данные в NS **** `Выключено` (5)

![основные настройки xDrip+ 1](../images/xDrip_Basic1.png)

#### Отключите автоматическую калибровку и терапию

Если вы используете более старую версию AAPS (до версии 3.2), обязательно отключите `автоматическую калибровку` (7) Если установлен флажок для `Автоматической калибровки`, активируйте `Загрузку терапии` (6) один раз, затем снимите флажок с `Автоматической калибровки` и снова деактивируйте `Загрузку терапии`.

![основные настройки xDrip+ 2](../images/xDrip_Basic2.png)

Если Нажать на `Дополнительные опции`)

    {admonition} Safety warning
    :class: warning
    You must deactivate "Upload treatments" from xDrip+, otherwise treatments can be doubled in AAPS leading to false COB and IOB.

Отключите `Загрузку терапии`(9) и убедитесь, что вы ** НЕ будете** пользоваться `Обратным заполнением данных` (11).

Опция `Оповещение при сбоях` также должна быть отключена(10). Иначе вы будете получать сигнал каждые 5 минут если wifi/мобильная сеть слабые или сервер недоступен.

![основные настройки xDrip+ 3](../images/xDrip_Basic3.png)

### **Настройки интеграций с приложениями** (Трансляция)

При работе AAPS необходимы данные гликемии, которые передаются при помощи локальной передачи данных. Она включается в настройках интеграции с приложениями.

→ Сэндвич-меню (1) → Настройки (2) → Настройки интеграций с приложениями (3) → Локальная трансляция данных **ВКЛ** (4)

Для того чтобы не было расхождений между приложениями, необходимо активировать `Отправлять отображаемый уровень ГК` (5).

Включите совместимую трансляцию (6).

![основные настройки xDrip+ 4](../images/xDrip_Basic4.png)

Если вы также включили `принимать статусы извне` в xDrip+ и `Включить передачу в xDrip+` в плагине AAPS xDrip+, то xDrip+ будет получать информацию об инсулинах, углеводах и базальной скорости от AAPS.

Если вы включите `Принимать калибровки`, xDrip+ будет использовать калибровки AAPS. Будьте осторожны при использовании этой функции с сенсорами Dexcom: сначала прочитайте [это](https://navid200.github.io/xDrip/docs/Calibrate-G6.html).

Не забудьте отключить звуки импорта, чтобы xDrip+ не издавал звуковые сигналы каждый раз, когда AAPS отправляет изменения базы/профиля.

![основные настройки xDrip+ 5](../images/xDrip_Basic5.png)

(xdrip-identify-receiver)=

#### Установить получателя

- Если возникают проблемы с локальной трансляцией (AAPS не получает значения ГК из xDrip+), перейдите в сэндвич-меню → (1) Настройки (2) → Настройки интеграций с приложениями (3) → Установить получателя (7) и введите `info.nightscout.androidaps` для сборки AAPS (если сборка PumpControl, вместо этого введите `info.nightscout.aapspumpcontrol`!!).
- Внимание: Автокоррекция, как правило, меняет i на прописную букву. **Используйте только строчные буквы** при вводе `info.nightscout.androidaps` (или `info.nightscout.aapspumpcontrol` для PumpControl). Прописная I не позволит AAPS получать данные ГК из xDrip+.
    
    ![xDrip+ Inter-app Settings Identify receiver](../images/xDrip_InterApp_NS.png)

## Используйте AAPS для калибровки в xDrip+

- Если вы хотите, чтобы AAPS мог калибровать показания гликемии, в xDrip +, перейдите в Настройки → Настройки интеграций с приложениями → Принимать калибровки и выберите ВКЛ (ON). 
- Другие варианты см. в Настройках → Менее распространенные настройки → Расширенная калибровка/Дополнительные параметры калибровки.

## Dexcom G6

- Трансмиттер Dexcom G6 может одновременно подключаться к ресиверу Dexcom (или к помпе T:slim) и одному приложению на вашем телефоне.
- При использовании xDrip+ в качестве приемника сначала удалите приложение Dexcom. **Невозможно одновременно подключить к трансмиттеру приложения xDrip+ и Dexcom!**
- Если вам нужно ПО Clarity и вы хотите максимально воспользоваться функционалом xDrip+, применяйте [Самостоятельно собранное приложение Dexcom BYODA](DexcomG6-if-using-g6-with-build-your-own-dexcom-app) с локальной трансляцией на xDrip+ или же xDrip + в качестве приложения-компаньона, получающего уведомления от официального приложения Dexcom.

### Версия xDrip+ в зависимости от серии трансмиттера G6.

- Все трансмиттеры G6, изготовленные после осени/конца 2018 называют "Firefly" (светлячок). Они не позволяют перезапустить сенсор без [ извлечения трансмиттера](https://navid200.github.io/xDrip/docs/Remove-transmitter.html), они не отправляют необработанные данные. Рекомендуется использовать самые свежие [Ночные сборки](https://github.com/NightscoutFoundation/xDrip/releases) xDrip+.
- Трансмиттеры с замененными старыми батареями и модифицированные трансмиттеры позволяют продлить срок службы сенсора и перезапускать его, они также отправляют необработанные данные. В этом случае можно пользоваться [свежей стабильной версией APK ](https://xdrip-plus-updates.appspot.com/stable/xdrip-plus-latest.apk).

### Настройки для работы с Dexcom

- Для настройки xDrip+ следуйте [этой инструкции](https://navid200.github.io/xDrip/docs/G6-Recommended-Settings.html).

### Упреждающие перезапуски не рекомендуются

**Только перезаряженные или модифицированные трансмиттеры Dexcom. [Упреждающий перезапуск](https://navid200.github.io/xDrip/docs/Preemptive-Restart.html) не работает со стандартными трансмиттерами и приводит к полной остановке сенсора: следует [ извлечь трансмиттер](https://navid200.github.io/xDrip/docs/Remove-transmitter.html), чтобы перезапустить сенсор.**

Автоматическое продление работы сенсоров Dexcom (`упреждающие перезапуски, preemtive restarts`) не рекомендуется, так как может привести к скачкам значений ГК на 9 день после перезапуска.

![скачок xDrip+ после упреждающего перезапуска](../images/xDrip_Dexcom_PreemptiveJump.png)

Для правильного применения необходимо иметь в виду следующие моменты:

- Если вы используете нативные данные с кодом калибровки в xDrip или Spike, в целях безопасности не следует разрешать упреждающий (preemptive) перезапуск датчика.
- Если все же упреждающие перезапуски необходимы, то убедитесь, что вы делаете это в то время, когда можете следить за изменениями и калибровать при потребности. 
- Если вы перезапускаете сенсор, делайте это либо без заводской калибровки для безопасных результатов в дни 11 и 12, либо будьте готовы калибровать и следить за изменениями.
- "Предварительное погружение" (установка сенсора намного раньше его старта в приложении) G6 с заводской калибровкой приведет к отклонениям в данных. Если вы все же делаете "предварительное погружение", то для получения лучших результатов вам, вероятно, придется калибровать сенсор.
- Если вы не планируете отслеживать все возможные изменения, то лучше вернуться к традиционному режиму калибровки и использовать систему, как G5.

Подробнее о деталях и причинах этих рекомендаций читайте [полную статью](https://www.diabettech.com/artificial-pancreas/diy-looping-and-cgm/) Tim Street на [www.diabettech.com](https://www.diabettech.com).

(xdrip-connect-g6-transmitter-for-the-first-time)=

### Первое подключение трансмиттера G6

**Для второго и следующих трансмиттеров смотрите [Продление срока работы трансмиттера](xdrip-extend-transmitter-life) ниже.**

Следуйте [этим инструкциям](https://navid200.github.io/xDrip/docs/Starting-G6.html).

(xdrip-transmitter-battery-status)=

### Состояние батареи трансмиттера

- Состояние батареи можно контролировать в разделе Состояние системы  
    → Сэндвич-меню (1) → Состояние системы (2) → На классической странице состояния (3), сдвиньте экран влево (4), чтобы перейти к → Экрану состояния G5/G6/G7.

![состояние системы xDrip+](../images/xDrip_Dexcom_Battery.png)

- Подробнее [здесь](https://navid200.github.io/xDrip/docs/Battery-condition.html).

(xdrip-extend-transmitter-life)=

### Увеличение срока работы трансмиттера

- <[Срок службы](https://navid200.github.io/xDrip/docs/Transmitter-lifetime.html) трансмиттеров Firefly не может быть продлен: возможность остается только для тех, в которых заменена батарея или для модифицированных трансмиттеров.
- Следуйте [этим инструкциям](https://navid200.github.io/xDrip/docs/Hard-Reset.html) для трансмиттеров, отличных от Firefly.

(xdrip-replace-transmitter)=

### Замена трансмиттера

- Выключите оригинальный ресивер Dexcom (если используете).
- Нажмите на [Остановить сенсор](https://navid200.github.io/xDrip/docs/Dexcom/StartG6Sensor.html) (только при замене сенсора).

- Забудьте устройство в системном состоянии XDrip и в настройках BT смартфона (показывается как Dexcom?? где ?? являются последними двумя цифрами серийного номера трансмиттера)  
    → Сэндвич - меню (1) → Состояние системы (2) → На классической странице состояния (3) сдвиньте экран влево (4), чтобы перейти к → Экрану состояния G5/G6 /G7 → Забыть устройство (5).

![состояние системы xDrip+](../images/xDrip_Dexcom_StopSensor.png)

- Удалите трансмиттер (и сенсор при замене). Как удалить трансмиттер без остановки сенсора, см. видео <https://youtu.be/AAhBVsc6NZo>.
- Поместите старый трансмиттер подальше, чтобы предотвратить повторное соединение. Микроволновая печь является идеальным щитом Фарадея - но отключите кабель питания, чтобы быть на 100% уверенным, что никто ее не включит.
- Следуйте [этим инструкциям](https://navid200.github.io/xDrip/docs/Starting-G6.html).
- Не включайте оригинальный ресивер Dexcom (если им пользуетесь) до появления первых данных в xDrip+.

### Новый сенсор

- Выключите оригинальный ресивер Dexcom (если используете).
- Остановите сенсор по [этим инструкциям](https://navid200.github.io/xDrip/docs/Dexcom/StartG6Sensor.html).

- Вставьте и запустите новый сенсор по [этим инструкциям](https://navid200.github.io/xDrip/docs/Starting-G6.html).

(xdrip-retrieve-sensor-code)=

### Получение кода сенсора

→ Сэндвич-меню (1) → Состояние системы (2) → На классической странице состояния (3), сдвиньте экран влево (4), чтобы перейти к → Экрану состояния G5/G6/G7 → Код калибровки.

![xDrip+ Получение кода сенсора Dexcom 2](../images/xDrip_Dexcom_SensorCode2.png)

(xdrip-troubleshooting-dexcom-g5-g6-and-xdrip)=

### Устранение неполадок Dexcom G6 и xDrip+

#### Проблемы сопряжения с трансмиттером

Следуйте [этим инструкциям](https://navid200.github.io/xDrip/docs/Connectivity-troubleshoot.html).

#### Проблемы при запуске нового сенсора

Следуйте [этим инструкциям](https://navid200.github.io/xDrip/docs/Dexcom/SensorFailedStart.html).

## Libre 1

- Настройте мост NFC - Bluetooth в xDrip+
    
    → Сэндвич-меню (1) → Настройки (2) →Менее распространенные настройки (3) → Настройки Bluetooth (4)

- В настройках Bluetooth установите флажки точно так же, как на экране ниже (5)
    
    - Отключите режим перезапуска watchdog, так как он сбрасывает Bluetooth телефона и прерывает связь с помпой.
    
    ![xDrip+ настройки Libre Bluetooth 1](../images/xDrip_Libre_BTSettings1.png)

- Можно попробовать включить следующие настройки (7)
    
    - Использовать сканирование
    - Доверять автоподключению
    - Использовать фоновые сканирования

- Если при этом теряется соединение с мостом или возникают трудности с восстановлением соединения, **ОТКЛЮЧИТЕ ИХ** (8).
    
    ![xDrip+ настройки Libre Bluetooth 2](../images/xDrip_Libre_BTSettings2.png)

- Оставьте все остальные параметры отключенными, если только не знаете, почему хотите их включить.
    
    ![xDrip+ настройки Libre Bluetooth 3](../images/xDrip_Libre_BTSettings3.png)

### Уровень батареи Libre smart reader

- Уровень заряда батареи таких мостов, как Miao Miao и Bubble (но не Blucon), отображается в AAPS.
- Подробности можно найти на странице [снимков экрана](Screenshots-sensor-level-battery).

### Подключите трансмиттер Libre и запустите сенсор

- Если сенсор нуждается в этом (Libre 2 EU и Libre 1 US), установите [ новейший алгоритм out-of-process ](https://drive.google.com/file/d/1f1VHW2I8w7Xe3kSQqdaY3kihPLs47ILS/view).

- Сенсор должен быть уже запущен с помощью приложения поставщика или при помощи ридера (xDrip+ не может запускать или останавливать сенсоры Libre).

- Установите источник данных на Libre Bluetooth.
    
    → Сэндвич-меню (1) → Настройки (2) → Выберите Libre Bluetooth в качестве аппаратного Источника данных (3)
    
    ![xDrip+ запуск трансмиттера Libre & Сенсора 1](../images/xDrip_Libre_Transmitter01.png)

- Сканируйте Bluetooth и подключите мост.
    
    → сэндвич-меню (1) → Сканировать Bluetooth (2) → Скан (3)
    
    - Если xDrip+ не может найти мост, убедитесь, что он не подключен к приложению поставщика. Зарядите его и выполните сброс его настроек.
    
    ![xDrip+ запуск трансмиттера Libre & Сенсора 2](../images/xDrip_Libre_Transmitter02.png)

- Запустите сенсор в xDrip+.
    
        {admonition} Safety warning
        :class: warning
        Do not use sensor data before the one hour warm-up is over: the values can be extremely high and cause wrong decisions in AAPS.
    
    → Сэндвич-меню (1) → Запустить сенсор (2) → Запустить сенсор (3) → Введите точное время запуска ридером или оригинальным приложением. Если запускали не сегодня, выберите "Не сегодня" (4).

![xDrip+ запуск трансмиттера Libre & Сенсора 3](../images/xDrip_Libre_Transmitter03.png)

## Модифицированное приложение Libre 2

- Установите источник данных на Libre (patched app).
    
    → Сэндвич-меню (1) → Настройки (2) → Выберите Libre (patched app) в качестве аппаратного Источника данных (3)
    
    ![xDrip+ Модифицированное приложение Libre Patched app 1](../images/xDrip_Libre_Patched01.png)

- Можно добавить `Bg Reading:d,vdrip libre_receiver:v` в разделе Менее распространенные настройки-> Дополнительные настройки журнала->Дополнительные теги для ведения журнала. Это позволит записывать сообщения об ошибках для устранения неисправностей.

![xDrip+ LibreLink журналы](../images/Libre2_Tags.png)